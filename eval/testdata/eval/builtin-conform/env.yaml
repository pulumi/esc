values:
  # Valid cases - should pass with no errors
  valid-string:
    fn::conform:
      schema: { type: string }
      value: "hello"

  valid-number:
    fn::conform:
      schema: { type: number, minimum: 0 }
      value: 42

  # Type violation - should emit error, still return 42
  type-error:
    fn::conform:
      schema: { type: string }
      value: 42

  # Object with required fields
  missing-required:
    fn::conform:
      schema:
        type: object
        properties:
          name: { type: string }
        required: [name]
      value:
        other: "value"

  # String constraints
  min-length-fail:
    fn::conform:
      schema: { type: string, minLength: 5 }
      value: "hi"

  # Number constraints
  number-range-fail:
    fn::conform:
      schema: { type: number, minimum: 10 }
      value: 5

  # Array validation
  array-items-fail:
    fn::conform:
      schema:
        type: array
        items: { type: string }
      value: ["hello", 42]

  # Schema from reference (dynamic schema)
  my-schema:
    type: string
    minLength: 1
  dynamic-schema:
    fn::conform:
      schema: ${my-schema}
      value: ""

  # Nested object validation
  nested-fail:
    fn::conform:
      schema:
        type: object
        properties:
          user:
            type: object
            properties:
              age: { type: number }
      value:
        user:
          age: "not a number"

  # Invalid schema definitions - should emit errors about the schema itself
  invalid-type-value:
    fn::conform:
      schema: { type: "invalid-type" }
      value: "test"

  invalid-minLength-type:
    fn::conform:
      schema: { type: string, minLength: "not a number" }
      value: "test"

  invalid-required-type:
    fn::conform:
      schema: { type: object, required: "should be array" }
      value: {}

  invalid-properties-type:
    fn::conform:
      schema: { type: object, properties: "should be object" }
      value: {}
